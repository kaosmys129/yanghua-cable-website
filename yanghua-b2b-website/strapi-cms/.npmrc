# NPM Configuration for Strapi Cloud Deployment
# Fix for SWC native binding issues

# Force npm to rebuild native modules
rebuild=true

# Configure platform-specific binaries
target_platform=linux
target_arch=x64

# Disable optional dependencies that might cause issues
optional=false

# Configure cache to avoid stale native bindings
cache-min=0

# Force fresh install of native modules
prefer-offline=false

# Configure registry and timeout
registry=https://registry.npmjs.org/
fetch-timeout=300000
fetch-retries=3

# SWC specific configuration
@swc:registry=https://registry.npmjs.org/

# Disable package-lock for cleaner builds
package-lock=false

# Configure node-gyp for native compilation
node_gyp=/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js