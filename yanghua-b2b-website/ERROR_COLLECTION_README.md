# ç½‘é¡µé”™è¯¯æ”¶é›†å’Œæ€§èƒ½ç›‘æ§ç³»ç»Ÿ

## æ¦‚è¿°

è¿™ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ç³»ç»Ÿä¸“é—¨è®¾è®¡ç”¨äºæ£€æµ‹å’Œæ”¶é›†é˜³åB2Bç½‘ç«™åœ¨æœ¬åœ°è¿è¡Œæ—¶çš„å„ç§é”™è¯¯å’Œæ€§èƒ½é—®é¢˜ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨è®¿é—®å„ä¸ªé¡µé¢ï¼Œæ”¶é›†é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„HTMLæŠ¥å‘Šã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” é”™è¯¯æ£€æµ‹
- **æ§åˆ¶å°é”™è¯¯**: æ•è·JavaScriptæ§åˆ¶å°ä¸­çš„æ‰€æœ‰é”™è¯¯ä¿¡æ¯
- **ç½‘ç»œé”™è¯¯**: ç›‘æµ‹HTTPè¯·æ±‚å¤±è´¥å’Œ4xx/5xxçŠ¶æ€ç 
- **JavaScriptè¿è¡Œæ—¶é”™è¯¯**: æ•è·æœªå¤„ç†çš„JavaScriptå¼‚å¸¸
- **æ€§èƒ½é—®é¢˜**: æ£€æµ‹è¶…è¿‡é˜ˆå€¼çš„é¡µé¢åŠ è½½æ—¶é—´

### ğŸ“Š æ€§èƒ½ç›‘æ§
- **DOMåŠ è½½æ—¶é—´**: ç›‘æµ‹DOMContentLoadedäº‹ä»¶
- **é¡µé¢å®Œæ•´åŠ è½½æ—¶é—´**: ç›‘æµ‹loadäº‹ä»¶å®Œæˆæ—¶é—´
- **é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP)**: æµ‹é‡First Contentful Paint
- **æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)**: æµ‹é‡Largest Contentful Paint
- **æ€§èƒ½é˜ˆå€¼æ£€æŸ¥**: è‡ªåŠ¨æ ‡è®°è¶…è¿‡é¢„è®¾é˜ˆå€¼çš„é¡µé¢

### ğŸ“± å¤šè®¾å¤‡æµ‹è¯•
- **æ¡Œé¢æµè§ˆå™¨**: Chrome, Firefox, Safari, Edge
- **ç§»åŠ¨è®¾å¤‡**: æ¨¡æ‹Ÿ iPhone 12 å’Œ Pixel 5
- **å“åº”å¼æµ‹è¯•**: æ£€æµ‹ä¸åŒè§†å£ä¸‹çš„é—®é¢˜

## å¿«é€Ÿå¼€å§‹

### 1. ç¡®ä¿å‰ç«¯æœåŠ¡è¿è¡Œ
```bash
npm run dev
```
ç¡®ä¿æœ¬åœ°å¼€å‘æœåŠ¡å™¨åœ¨ http://localhost:3000 æ­£å¸¸è¿è¡Œã€‚

### 2. è¿è¡Œé”™è¯¯æ”¶é›†æµ‹è¯•
```bash
# ä»…è¿è¡Œé”™è¯¯æ”¶é›†æµ‹è¯•
npm run test:error-collection

# è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆHTMLæŠ¥å‘Š
npm run error-analysis
```

### 3. æŸ¥çœ‹æŠ¥å‘Š
æµ‹è¯•å®Œæˆåï¼Œä¼šåœ¨ä»¥ä¸‹ä½ç½®ç”ŸæˆæŠ¥å‘Šï¼š
- **JSONæŠ¥å‘Š**: `test-results/error-collection-report.json`
- **HTMLæŠ¥å‘Š**: `test-results/error-report.html`

## æµ‹è¯•è¦†ç›–çš„é¡µé¢

ç³»ç»Ÿä¼šè‡ªåŠ¨æµ‹è¯•ä»¥ä¸‹é¡µé¢ï¼š
- é¦–é¡µ (`/`)
- è‹±æ–‡é¦–é¡µ (`/en`)
- è¥¿ç­ç‰™è¯­é¦–é¡µ (`/es`)
- äº§å“é¡µé¢ (`/en/products`)
- è§£å†³æ–¹æ¡ˆé¡µé¢ (`/en/solutions`)
- é¡¹ç›®æ¡ˆä¾‹é¡µé¢ (`/en/projects`)
- æ–°é—»é¡µé¢ (`/en/news`)
- å…³äºæˆ‘ä»¬é¡µé¢ (`/en/about`)
- è”ç³»æˆ‘ä»¬é¡µé¢ (`/en/contact`)

## é”™è¯¯ç±»å‹è¯´æ˜

### ğŸš¨ æ§åˆ¶å°é”™è¯¯
é€šå¸¸åŒ…æ‹¬ï¼š
- JavaScriptè¯­æ³•é”™è¯¯
- æœªå®šä¹‰çš„å˜é‡æˆ–å‡½æ•°
- ç½‘ç»œè¯·æ±‚å¤±è´¥
- èµ„æºåŠ è½½å¤±è´¥

### ğŸŒ ç½‘ç»œé”™è¯¯
åŒ…æ‹¬ï¼š
- 404 - é¡µé¢æˆ–èµ„æºæœªæ‰¾åˆ°
- 500 - æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
- 403 - æƒé™æ‹’ç»
- è¶…æ—¶é”™è¯¯

### âš¡ JavaScripté”™è¯¯
åŒ…æ‹¬ï¼š
- è¿è¡Œæ—¶å¼‚å¸¸
- ç±»å‹é”™è¯¯
- å¼•ç”¨é”™è¯¯
- è¯­æ³•é”™è¯¯

### ğŸ”¥ æ€§èƒ½é—®é¢˜
åŸºäºä»¥ä¸‹é˜ˆå€¼æ£€æµ‹ï¼š
- **DOMåŠ è½½**: >2ç§’ (è­¦å‘Š), >3ç§’ (é”™è¯¯)
- **é¡µé¢å®Œæ•´åŠ è½½**: >5ç§’ (è­¦å‘Š), >7.5ç§’ (é”™è¯¯)
- **é¦–æ¬¡å†…å®¹ç»˜åˆ¶**: >1.5ç§’ (è­¦å‘Š), >2.25ç§’ (é”™è¯¯)
- **æœ€å¤§å†…å®¹ç»˜åˆ¶**: >2.5ç§’ (è­¦å‘Š), >3.75ç§’ (é”™è¯¯)

## é«˜çº§ç”¨æ³•

### å•ç‹¬è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
# åªæµ‹è¯•ç‰¹å®šé¡µé¢
npx playwright test tests/e2e/error-collection.spec.ts --grep "é¦–é¡µ"

# åœ¨UIæ¨¡å¼ä¸‹è¿è¡Œï¼ˆå¯è§†åŒ–è°ƒè¯•ï¼‰
npm run test:ui

# è°ƒè¯•æ¨¡å¼
npm run test:debug
```

### è‡ªå®šä¹‰é…ç½®
å¯ä»¥åœ¨ `playwright.config.ts` ä¸­ä¿®æ”¹ï¼š
- æµ‹è¯•è¶…æ—¶æ—¶é—´
- æµè§ˆå™¨ç±»å‹
- å¹¶å‘æ•°é‡
- è¾“å‡ºç›®å½•

### ç”Ÿæˆç‹¬ç«‹æŠ¥å‘Š
```bash
# ä»…ç”ŸæˆHTMLæŠ¥å‘Šï¼ˆåŸºäºå·²æœ‰çš„JSONæ•°æ®ï¼‰
npm run test:report
```

## æŠ¥å‘Šè§£è¯»

### ğŸ“Š æ¦‚è§ˆå¡ç‰‡
- **æ€»é”™è¯¯æ•°é‡**: æ‰€æœ‰ç±»å‹é”™è¯¯çš„æ€»å’Œ
- **æµ‹è¯•é¡µé¢æ•°**: æˆåŠŸæµ‹è¯•çš„é¡µé¢æ•°é‡
- **æ€§èƒ½è­¦å‘Š**: æ€§èƒ½é—®é¢˜çš„è­¦å‘Šæ•°é‡
- **å¹³å‡åŠ è½½æ—¶é—´**: æ‰€æœ‰é¡µé¢çš„å¹³å‡åŠ è½½æ—¶é—´

### ğŸ“‹ è¯¦ç»†æŠ¥å‘Š
- æ¯ä¸ªé”™è¯¯éƒ½åŒ…å«å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- æ€§èƒ½æŒ‡æ ‡ä»¥å›¾å½¢åŒ–æ–¹å¼å±•ç¤º
- å¯æŠ˜å çš„é”™è¯¯è¯¦æƒ…
- é”™è¯¯æºæ–‡ä»¶å’Œå †æ ˆä¿¡æ¯

### ğŸ¯ ä¼˜å…ˆçº§æŒ‡å¯¼
1. **é«˜ä¼˜å…ˆçº§**: JavaScripté”™è¯¯å’Œç½‘ç»œé”™è¯¯
2. **ä¸­ä¼˜å…ˆçº§**: æ€§èƒ½é”™è¯¯ï¼ˆ>é˜ˆå€¼1.5å€ï¼‰
3. **ä½ä¼˜å…ˆçº§**: æ€§èƒ½è­¦å‘Šå’Œæ§åˆ¶å°è­¦å‘Š

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### æµ‹è¯•æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ä¾èµ–
npm install

# æ£€æŸ¥Playwrightå®‰è£…
npx playwright install
```

#### å‰ç«¯æœåŠ¡è¿æ¥å¤±è´¥
```bash
# ç¡®ä¿å¼€å‘æœåŠ¡å™¨è¿è¡Œ
npm run dev

# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :3000
```

#### æƒé™é”™è¯¯
```bash
# macOS/Linux
chmod +x scripts/*.ts

# Windows (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ)
```

### è°ƒè¯•æŠ€å·§

#### 1. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```bash
DEBUG=pw:* npm run test:error-collection
```

#### 2. ä¿ç•™æµè§ˆå™¨çª—å£
åœ¨ `playwright.config.ts` ä¸­è®¾ç½®ï¼š
```typescript
use: {
  headless: false,
  slowMo: 1000
}
```

#### 3. æˆªå›¾è°ƒè¯•
æµ‹è¯•å¤±è´¥æ—¶ä¼šè‡ªåŠ¨æˆªå›¾ï¼Œä¿å­˜åœ¨ `test-results/` ç›®å½•ã€‚

## é›†æˆåˆ°CI/CD

### GitHub Actions ç¤ºä¾‹
```yaml
name: Error Collection Test
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  error-collection:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v3
      with:
        node-version: '18'
    - run: npm ci
    - run: npx playwright install
    - run: npm run build
    - run: npm run error-analysis
    - uses: actions/upload-artifact@v3
      with:
        name: error-reports
        path: test-results/
```

## è‡ªå®šä¹‰å’Œæ‰©å±•

### æ·»åŠ æ–°é¡µé¢æµ‹è¯•
åœ¨ `tests/e2e/error-collection.spec.ts` çš„ `pagesToTest` æ•°ç»„ä¸­æ·»åŠ ï¼š
```typescript
{ name: 'æ–°é¡µé¢', url: '/new-page' }
```

### ä¿®æ”¹æ€§èƒ½é˜ˆå€¼
åœ¨ `ErrorCollector.collectPerformanceMetrics()` æ–¹æ³•ä¸­ä¿®æ”¹ï¼š
```typescript
const thresholds = {
  domContentLoaded: 2000,  // è‡ªå®šä¹‰é˜ˆå€¼
  loadComplete: 5000,
  // ...
};
```

### æ·»åŠ æ–°çš„é”™è¯¯ç±»å‹
æ‰©å±• `ErrorReport` æ¥å£å’Œç›¸åº”çš„æ”¶é›†é€»è¾‘ï¼š
```typescript
interface ErrorReport {
  // ... ç°æœ‰å­—æ®µ
  customErrors: Array<{
    type: string;
    message: string;
    severity: 'low' | 'medium' | 'high';
  }>;
}
```

## æ”¯æŒä¸åé¦ˆ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥ `test-results/` ç›®å½•ä¸­çš„è¯¦ç»†æ—¥å¿—
3. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒ

---

**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-09-20  
**ç»´æŠ¤å›¢é˜Ÿ**: é˜³åB2Bç½‘ç«™å¼€å‘ç»„